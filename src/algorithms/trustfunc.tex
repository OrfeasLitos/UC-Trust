\Suppressnumber
\begin{lstlisting}[label=trustfunc, style=numbers]
(*@$\mathcal{F}_{\mathrm{Trust}}$ \Reactivatenumber@*)
Has oracle access to every player's (*@$Alice$@*) utility function util((*@$Alice$@*))

Upon receiving (chooseBestSeller, (*@$d$@*), (*@$L$@*)) from (*@$Alice$@*):
  (*@$Bob$@*) =
  (*@$\argmax\limits_{Bob \in L}\left\{\right.$@*) util((*@$Alice$@*))((*@$state_{Alice} \cup s - x$@*)) (*@$:$@*)
  (*@$s \in d \wedge s \in$@*) assets((*@$Bob$@*)) (*@$\wedge$@*) (*@$Alice$@*) has (*@$x$@*) coins (*@$\wedge$@*)
  (util((*@$Bob$@*))((*@$state_{Bob} \setminus s + x \: \mathrm{coins} + 1 \: \mathrm{point}$@*)) >
  util((*@$Bob$@*))((*@$state_{Bob} + x \: \mathrm{coins} - 1 \: \mathrm{point}$@*))) (*@$\wedge$@*)
  util((*@$Bob$@*))((*@$state_{Bob} \setminus s + x \: \mathrm{coins} + 1 \: \mathrm{point}$@*)) > util((*@$Bob$@*))((*@$state_{Bob}$@*)) (*@$\left.\right\}$@*)
  If util((*@$Alice$@*))((*@$state_{Alice}$@*)) (*@$\geq$@*) util((*@$Alice$@*))((*@$state_{Alice} \cup s - x$@*)):
    (*@$Bob$@*) = (*@$\bot$@*)
  send message (bestSeller, (*@$d$@*), (*@$L$@*), (*@$Bob$@*)) to (*@$Alice$@*)
\end{lstlisting}

Assumptions:
\begin{itemize}
  \item Trades are atomic. $\mathcal{F}_{\mathrm{Trust}}$ can deterministically decide whether
  $Bob$ will complete the trade.
  \item The internal workings of $\mathcal{F}_{\mathrm{Trust}}$ is common knowledge to the players.
  Their utility depends on it.
\end{itemize}
Note: It would be interesting to see how utilities (as algorithms) and
$\mathcal{F}_{\mathrm{Trust}}$ have a "fixed point".
