\Suppressnumber
\begin{lstlisting}[label=distenv, style=numbers]
(*@$\mathcal{E}$@*) distinguisher(*@\Reactivatenumber@*)
(*@$Alice \overset{R}{\leftarrow} \mathcal{P}$@*) (*@\label{distenv:Alice}@*)
(*@$Bob \overset{R}{\leftarrow} \mathcal{P} \setminus \left\{Alice\right\}$@*) (*@\label{distenv:Bob}@*)
util((*@$Alice$@*))((*@$\left\{assets\right\}, x, r$@*)) = (*@$2\left|\left\{assets\right\}\right| + x$@*) (*@\label{distenv:setutil:Alice}@*)
util((*@$Bob$@*))((*@$\left\{assets\right\}, x, r$@*)) = (*@$\left|\left\{assets\right\}\right| + 2x$@*) (*@\label{distenv:setutil:Bob}@*)
(*@$\lambda\left(Alice\right)\left(t\right)$@*) = (*@$\lambda\left(Bob\right)\left(t\right)$@*) = (*@$\frac{1}{t^2}$@*)
(*@$\forall p \in \left\{Alice, Bob\right\}$@*):
  send message (type, util((*@$p$@*)), (*@$\lambda\left(p\right)$@*)) to (*@$p$@*) (*@\label{distenv:sendutil}@*)
(*@$s \overset{R}{\leftarrow} Asset$@*)
send message (obtain, 1 coin) to (*@$Alice$@*) (*@\label{distenv:obtain:Alice}@*)
send message (obtain, (*@$s$@*)) to (*@$Bob$@*) (*@\label{distenv:obtain:Bob}@*)
send message (satisfy, (*@$\left\{s\right\}$@*), (*@$\left\{Bob\right\}$@*)) to (*@$Alice$@*) (*@\label{distenv:satisfy}@*)

Upon receiving message (x, (*@$\left\{s\right\}$@*), (*@$\left\{Bob\right\}$@*)) from (*@$Alice$@*):
  If x == satisfied:
    return 1 # functionality (*@\label{distenv:func}@*)
  Else: # if x (*@$\in \left\{\right.$@*)cheated, unsatisfied(*@$\left.\right\}$@*)
    return 0 # protocol (*@\label{distenv:prot}@*)
\end{lstlisting}
